@model List<AreaDocente.Models.Entities.MVCMateriali>

@functions {
    string GetIconClass(string contentType)
    {
        return contentType switch
        {
            "application/pdf" => "bi-file-earmark-pdf-fill text-danger",
            "application/msword" or "application/vnd.openxmlformats-officedocument.wordprocessingml.document" => "bi-file-earmark-word-fill text-primary",
            "application/vnd.ms-excel" or "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" => "bi-file-earmark-excel-fill text-success",
            "image/jpeg" or "image/png" => "bi-file-earmark-image-fill text-info",
            _ => "bi-file-earmark-fill"
        };
    }
}

<div class="container my-5">
    <h1>Elenco Materiali</h1>

    <table class="table">
        <thead>
            <tr>
                @*  <th>Id</th> *@
                <th>Titolo</th>
                <th>Materiale</th>
                @* <th>Tipo</th> *@
                <th>Esame</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var mat in Model)
            {
                var iconClass = GetIconClass(mat.Tipo);

                <tr>
                    <td>@mat.Titolo</td>
                    <td>
                        <a asp-action="View" target="_blank" asp-route-id="@mat.K_Materiale" class="btn btn-outline-primary btn-sm me-1">
                            <i class="bi @iconClass me-1"></i> Visualizza
                        </a>
                        <a asp-action="Download" asp-route-id="@mat.K_Materiale" class="btn btn-outline-secondary btn-sm">
                            <i class="bi bi-download me-1"></i> Scarica
                        </a>
                    </td>
                    <td>@mat.esame?.TitoloEsame</td>
                    <td>
                        <a class="btn btn-warning btn-sm" asp-controller="Materiali" asp-action="Edit" asp-route-id="@mat.K_Materiale">
                            <i class="bi bi-pencil-square me-1"></i> Modifica
                        </a>
                    </td>
                </tr>
            }
        </tbody>
        <tfoot>
            <tr>
                <td>
                    <a class="btn btn-primary" asp-controller="Materiali" asp-action="Add"><i class="bi bi-plus-circle me-1"></i> Inserire un nuovo materiale</a>
                </td>
            </tr>
        </tfoot>
    </table>
</div>