@{
	var corsi = (IEnumerable<dynamic>)ViewBag.Corsi;

	var tipoGruppi = corsi
		.GroupBy(c => c.TipoCorso)
		.OrderBy(g => g.Key);
}

<div class="container" style="padding-top: 120px;">
	<div class="row">
		<h1 class="mb-4">Corsi di Laurea</h1>

		<!-- Colonna sinistra: testo + accordion -->
		<div class="col-md-8">
			<p>
				La nostra università online propone una vasta gamma di <b>corsi di laurea</b>, pensati per rispondere alle esigenze di formazione nei più diversi ambiti disciplinari.
				L’offerta comprende <b>percorsi di laurea triennale, magistrale e a ciclo unico</b>, così da permettere a ogni studente di scegliere il cammino più adatto ai propri interessi
				e obiettivi professionali. Ogni corso è progettato per offrire una preparazione solida, aggiornata e in linea con le richieste del mondo del lavoro,
				mantenendo al tempo stesso la flessibilità tipica della didattica online. Qualunque sia il tuo percorso, troverai un ambiente dinamico, accessibile e orientato al supporto costante
				dello studente.
			</p>

			<div class="accordion" id="accordionTipo">
				@foreach (var tipo in tipoGruppi)
				{
					var tipoId = "tipo_" + tipo.Key.Replace(" ", "").ToLowerInvariant();

					<div class="accordion-item">
						<h2 class="accordion-header" id="heading-@tipoId">
							<button class="accordion-button collapsed" type="button"
									data-bs-toggle="collapse"
									data-bs-target="#@tipoId"
									aria-expanded="false"
									aria-controls="@tipoId">
								<strong>@tipo.Key</strong>
							</button>
						</h2>
						<div id="@tipoId" class="accordion-collapse collapse"
							 aria-labelledby="heading-@tipoId"
							 data-bs-parent="#accordionTipo">
							<div class="accordion-body">
								@{
									var facoltaGruppi = tipo
									.GroupBy(f => f.NomeFacolta)
									.OrderBy(f => f.Key);
								}

								@foreach (var facolta in facoltaGruppi)
								{
									<div class="mb-3">
										<h5>@facolta.Key</h5>
										<ul class="list-group">
											@foreach (var corso in facolta)
											{
												<li class="list-group-item">
													<nobr>Corso:</nobr> <a class ="text-primary">@corso.TitoloCorso</a> <br />
													Durata: <strong>@corso.Durata</strong>
												</li>
											}
										</ul>
									</div>
								}
							</div>
						</div>
					</div>
				}
			</div>
		</div>

		<!-- Colonna destra: immagine -->
		<div class="col-md-4 d-flex align-items-start">
			<img src="~/sources/cors.jpg" class="img-fluid roundedshadow" />
		</div>
	</div>
</div>

